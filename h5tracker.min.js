!function(n,e){function t(n){if(!n||"string"!=typeof n)return n;var e=d[n];return e?e:(e=n.indexOf("-")<0&&n.indexOf("_")<0?n:n.replace(/[-_]+([a-z])/gi,function(n,e){return e.toUpperCase()}),d[n]=e,e)}function r(){return Date.now().toString(36)+Math.random().toString(36).slice(2,5)}function o(){function n(n,e){return i.push({event:n,fn:e}),o}function e(n,e){return i=i.filter(function(t){return!(t.event===n&&t.fn===e)}),o}function t(t,r){function i(){e(t,i),r.apply(o,arguments)}return n(t,i),o}function r(n){var e=[].slice.call(arguments,1);return i.filter(function(e){return e.event===n}).forEach(function(n){n.fn.apply(o,e)}),o}var o={},i=[];return o.on=n,o.off=e,o.once=t,o.emit=r,o}function i(n,e,t){function o(){if(e[p]!==d&&(l=null),!l)try{l=JSON.parse(e[n]||"[]")}catch(t){l=[]}}function i(){e[p]=r(),e[n]=JSON.stringify(l)}function a(n){o();var e=r(),a=Date.now();return l.push({id:e,birthday:a,expires:t,data:n}),i(),e}function c(){return o(),l.slice()}function f(){o();var n=0,e=Date.now();if(null!==v){if(!(e>v))return n;v=null}return l=l.filter(function(t){var r=t.birthday+1e3*t.expires;return e>r?(n++,!1):(v=null!==v?Math.min(v,r):r,!0)}),i(),n}function u(n){o(),l=l.filter(function(e){return n===e.id?(e.birthday+e.expires===v&&(v=null),!1):!0}),i()}e=e||localStorage,t=t||864e3;var l,s={},p=n+"_ts",d=null,v=null;return s.push=a,s.toArray=c,s.clean=f,s.remove=u,s}function a(n,e,r){var o=function(i,a){var c,f;if("function"==typeof i)return f=i["-jsets-params"],f||(f=[],String(i).replace(/\(\s*([^()]+?)\s*\)/,function(n,e){f=e.split(/\s*,\s*/)}),i["-jsets-params"]=f),o(f,i);if("string"==typeof i||"number"==typeof i)return i=r?t(i):i,"function"==typeof a?(a.call(n,e(i)),n):e(i);if("object"==typeof i){if(i instanceof Array)return"function"==typeof a?(c=[],i.forEach(function(n){c.push(e(r?t(n):n))}),a.apply(n,c),n):(c={},i.forEach(function(n){c[n]=e(r?t(n):n)}),c);var u;if("function"==typeof a){c=[];for(u in i)c.push(e(r?t(u):u)||i[u]);return n}c={};for(u in i)c[u]=e(r?t(u):u)||i[u];return c}};return o}function c(n,e,r){return function(o,i){if("string"==typeof o||"number"==typeof o)e(r?t(o):o,i);else if("object"==typeof o)if(o instanceof Array)o.forEach(function(n,t){e(t,n)});else for(var a in o)e(r?t(a):a,o[a]);return n}}function f(e){function t(n){return u.push(n)}function r(n){return Object.keys(n).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(n[e])}).join("&")}function o(n,e){f.push({accept:e,query:r(n)});a()}function a(){u.clean(),f.clean();var e=f.toArray().pop();if(e){var t=n.createElement("img");t.onload=function(){f.remove(e.id),delete c[e.id],setTimeout(function(){a()},1e3)},t.src=e.data.accpet+"?"+e.data.query,c[e.id]=t}}var c={},f=i(e+"_send"),u=i(e+"_log");return c.log=t,c.send=o,c.scan=a,c}function u(n,e){function t(n,e){return void 0===s?(v.push({name:n,data:e}),!1):((Object.keys(m)||[]).forEach(function(n){void 0===e[n]&&(e[n]=m[n])}),void 0!==d[n]&&d[n](e),!0)}function r(n){t("send",n)&&(l.emit("send",n),e.send(n))}function i(n){"string"==typeof n&&(n={message:n,level:"debug"}),t("log",n)&&(l.emit("log",n),console[n.level].call(console,n.message),e.log(n))}function u(n){return(s=n.accept)?(d=n.event||{},m=n.data||{},(v||[]).forEach(function(n){switch(n.name){case"send":r(n.data);break;case"log":i(n.data)}}),void(v=null)):void console.error("h5tracker: create() acceptUrl not is void")}var l=o();l.name=n;var s,e=f(n),p={};l.set=c(l,function(n,e){p[n]=e},!0),l.get=a(l,function(n){return p[n]},!0);var d={},v=[],m={};return l.send=r,l.log=i,["debug","info","warn","error","fatal"].forEach(function(n){l[n]=function(e){i({level:n,message:e})}}),l.create=u,l}function l(n){function e(){}function t(e){if("string"!=typeof e)return void console.error('Parameter "line" is not a string type.');var t=e.match(/^(?:([\w$_]+)\.)?(\w+)$/);if(!t)return void console.error('Parameter "line" is invalid format.');var r=t[1],o=t[2],i=[].slice.call(arguments,1);if(r){var a=v[r];if(a||(a=v[r]=u(n+"_"+r)),"function"==typeof a[o])return a[o].apply(a,i);console.error('Tracker method "%s" is invalid.',o)}else{if("function"==typeof m[o])return m[o].apply(m,i);console.error('App method "%s" is invalid.',o)}}console.log("createApp() appName: %s",n);var r=u("main");r.createEmitter=o,r.createStorage=f,r.createStorageList=i,r.createTracker=u,v[r.name]=r;return r.config=e,r.cmd=t,r}var s=e.h5tObjectName||"h5t",p=e[s];if(!p||!p.defined){var d={},v={},m=l(s),y=function(){m.cmd.apply(m,arguments)};if(y.app=m,y.defined=!0,p){var g=[].concat(p.p||[],p.q||[]);p.p=p.q=null,y.p=y.q={push:function(n){y.apply(y,n)}},g.forEach(function(n){y.apply(y,n)})}e[s]=y}}(document,window);