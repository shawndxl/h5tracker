!function(n,e){function t(n){if(!n||"string"!=typeof n)return n;var e=d[n];return e?e:(e=n.indexOf("-")<0&&n.indexOf("_")<0?n:n.replace(/[-_]+([a-z])/gi,function(n,e){return e.toUpperCase()}),d[n]=e,e)}function r(){return Date.now().toString(36)+Math.random().toString(36).slice(2,5)}function o(){function n(n,e){return i.push({event:n,fn:e}),o}function e(n,e){return i=i.filter(function(t){return!(t.event===n&&t.fn===e)}),o}function t(t,r){function i(){e(t,i),r.apply(o,arguments)}return n(t,i),o}function r(n){var e=[].slice.call(arguments,1);return i.filter(function(e){return e.event===n}).forEach(function(n){n.fn.apply(o,e)}),o}var o={},i=[];return o.on=n,o.off=e,o.once=t,o.emit=r,o}function i(n,e,t){function o(){if(e[s]!==p&&(c=null),!c)try{c=JSON.parse(e[n]||"[]")}catch(t){c=[]}}function i(){e[s]=r(),e[n]=JSON.stringify(c)}function f(n){o();var e=r(),f=Date.now();return c.push({id:e,birthday:f,expires:t,data:n}),i(),e}function u(){o();var n=0,e=Date.now();if(null!==d){if(!(d>e))return n;d=null}return c=c.filter(function(t){var r=t.birthday+t.expires;return e>r?(n++,!1):(d=null!==d?Math.min(d,r):r,!0)}),i(),n}function a(n){o(),c=c.filter(function(e){return n===e.id?(e.birthday+e.expires===d&&(d=null),!1):!0}),i()}e=e||localStorage,t=t||864e3;var c,l={},s=n+"_ts",p=null,d=null;return l.push=f,l.clean=u,l.remove=a,l}function f(n,e,r){var o=function(i,f){var u,a;if("function"==typeof i)return a=i["-jsets-params"],a||(a=[],String(i).replace(/\(\s*([^()]+?)\s*\)/,function(n,e){a=e.split(/\s*,\s*/)}),i["-jsets-params"]=a),o(a,i);if("string"==typeof i||"number"==typeof i)return i=r?t(i):i,"function"==typeof f?(f.call(n,e(i)),n):e(i);if("object"==typeof i){if(i instanceof Array)return"function"==typeof f?(u=[],i.forEach(function(n){u.push(e(r?t(n):n))}),f.apply(n,u),n):(u={},i.forEach(function(n){u[n]=e(r?t(n):n)}),u);var c;if("function"==typeof f){u=[];for(c in i)u.push(e(r?t(c):c)||i[c]);return n}u={};for(c in i)u[c]=e(r?t(c):c)||i[c];return u}};return o}function u(n,e,r){return function(o,i){if("string"==typeof o||"number"==typeof o)e(r?t(o):o,i);else if("object"==typeof o)if(o instanceof Array)o.forEach(function(n,t){e(t,n)});else for(var f in o)e(r?t(f):f,o[f]);return n}}function a(n){function e(n){return a.push(n)}function t(n){return Object.keys(n).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(n[e])}).join("&")}function r(n,e){return u.push({accept:e,query:t(n)})}function o(){a.clean(),u.clean()}var f={},u=i(n+"_send"),a=i(n+"_log");return f.log=e,f.send=r,f.scan=o,f}function c(n,e){function t(n,e){return void 0===s?(v.push({name:n,data:e}),!1):(d[n](e),!0)}function r(n){t("send",n)&&(l.emit("send",n),e.send(n))}function i(n){"string"==typeof n&&(n={message:n,level:"debug"}),t("log",n)&&(l.emit("log",n),console[n.level].call(console,n.message),e.log(n))}function c(n){s=n.accept,d=n.event||{},m=n.data||{},(v||[]).forEach(function(n){var e=d[n.name];e&&e(n.data)}),v=null}var l=o();l.name=n;var s,e=a(n),p={};l.set=u(l,function(n,e){p[n]=e},!0),l.get=f(l,function(n){return p[n]},!0);var d={},v=[],m={};return l.send=r,l.log=i,["debug","info","warn","error","fatal"].forEach(function(n){l[n]=function(e){i({level:n,message:e})}}),l.create=c,l}function l(n){function e(){}function t(e){if("string"!=typeof e)return void console.error('Parameter "line" is not a string type.');var t=e.match(/^(?:([\w$_]+)\.)?(\w+)$/);if(!t)return void console.error('Parameter "line" is invalid format.');var r=t[1],o=t[2],i=[].slice.call(arguments,1);if(r){var f=v[r];if(f||(f=v[r]=c(n+"_"+r)),"function"==typeof f[o])return f[o].apply(f,i);console.error('Tracker method "%s" is invalid.',o)}else{if("function"==typeof m[o])return m[o].apply(m,i);console.error('App method "%s" is invalid.',o)}}console.log("createApp() appName: %s",n);var r=c("main");r.createEmitter=o,r.createStorage=a,r.createStorageList=i,r.createTracker=c,v[r.name]=r;return r.config=e,r.cmd=t,r}var s=e.h5tObjectName||"h5t",p=e[s];if(!p||!p.defined){var d={},v={},m=l(s),y=function(){m.cmd.apply(m,arguments)};if(y.app=m,y.defined=!0,p){var g=[].concat(p.p||[],p.q||[]);p.p=p.q=null,y.p=y.q={push:function(n){y.apply(y,n)}},g.forEach(function(n){y.apply(y,n)})}e[s]=y}}(document,window);